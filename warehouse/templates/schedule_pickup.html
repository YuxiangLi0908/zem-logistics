{% extends 'base.html' %}

{% block content %}
    <h3>待预约</h3>
    <table>
        <thead>
            <tr>
                <th style="border: 1px solid #dddddd;">货柜</th>
                <th style="border: 1px solid #dddddd;">客户</th>
                <th style="border: 1px solid #dddddd;">ETA</th>
                <th style="border: 1px solid #dddddd;">目的港</th>
                <th style="border: 1px solid #dddddd;">船/空运公司</th>
                <th style="border: 1px solid #dddddd;">柜型</th>
                <th style="border: 1px solid #dddddd;">提柜地址</th>
                <th style="border: 1px solid #dddddd;">提单号</th>
                <th style="border: 1px solid #dddddd;">预约提柜时间</th>
            </tr>
        </thead>
        <tbody>
            {% for c in retrieval_not_scheduled %}
            <tr>
                <td style="border: 1px solid #dddddd;">{{ c.container_number }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.customer_name }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.eta }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.retrieval_id.destination }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.retrieval_id.shipping_line }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.container_number.container_type }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.retrieval_id.retrieval_location }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.retrieval_id.shipping_order_number }}</td>
                <td style="border: 1px solid #dddddd;">
                    <form method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" name="order_id" value="{{ c.order_id }}">
                        <input type="hidden" name="step" value="schedule">
                        {{ retrieval_form.target_retrieval_timestamp }}
                        <button type="submit">确认预约</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <hr class="Dashed" style="margin-top: 40px; margin-bottom: 40px;">

    <h3>待提柜</h3>
    <table>
        <thead>
            <tr>
                <th style="border: 1px solid #dddddd;">货柜</th>
                <th style="border: 1px solid #dddddd;">客户</th>
                <th style="border: 1px solid #dddddd;">ETA</th>
                <th style="border: 1px solid #dddddd;">目的港</th>
                <th style="border: 1px solid #dddddd;">船/空运公司</th>
                <th style="border: 1px solid #dddddd;">柜型</th>
                <th style="border: 1px solid #dddddd;">提柜地址</th>
                <th style="border: 1px solid #dddddd;">提单号</th>
                <th style="border: 1px solid #dddddd;">预约提柜时间</th>
                <th style="border: 1px solid #dddddd;">实际提柜时间</th>
            </tr>
        </thead>
        <tbody>
            {% for c in retrieval_scheduled %}
            <tr>
                <td style="border: 1px solid #dddddd;">{{ c.container_number }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.customer_name }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.eta }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.retrieval_id.destination }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.retrieval_id.shipping_line }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.container_number.container_type }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.retrieval_id.retrieval_location }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.retrieval_id.shipping_order_number }}</td>
                <td style="border: 1px solid #dddddd;">{{ c.retrieval_id.target_retrieval_timestamp }}</td>
                <td style="border: 1px solid #dddddd;">
                    <form method="post" action="">
                        {% csrf_token %}
                        <input type="hidden" name="order_id" value="{{ c.order_id }}">
                        <input type="hidden" name="step" value="confirmation">
                        {{ retrieval_form.actual_retrieval_timestamp }}
                        <button type="submit">确认提柜</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
{% endblock %}